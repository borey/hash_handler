/*
 * Hash Handler v0.1
 * Copyright 2011, Lim Borey
 * Licensed under the MIT.
 */


var HashHandler=HH={};if(typeof window.console=="undefined"){window.console={log:function(){},warn:function(){},error:function(){}}}HH.Util={getParams:function(b){b=b||window.location.hash;a=b.match(/[^&?=]*=[^&?=]*/g);r={};if(!a){return r}for(i=0;i<a.length;i++){r[a[i].match(/[^&?=]*/)[0]]=a[i].match(/=([^&?]*)/)[0].replace("=","")}return r}};HH.Route=function(){return{register:function(b){for(var c in b){HH.Event.register(c,b[c])}},activate:function(){if("onhashchange" in window){window.onhashchange=HH.Event.handleRouteChange}else{var b=window.location.hash;setInterval(function(){if(window.location.hash!=b){b=window.location.hash;HH.Event.handleRouteChange()}},100)}HH.Event.handleRouteChange()}}}();HH.Event=function(){var b={},g="option",f="all",e="none",h=/\/\:/,j=/\/\*/;var d=function(k,m){try{k["404"][e][0]()}catch(l){console.error('callback for "'+m+'" was not set')}};var c=function(k){console.warn('callback for "'+k+'" route is undefined')};return{register:function(k,m){var l=k.split("/")[0];b[l]=b[l]||{};if(h.test(k)){if(!m){c(k);return}b[l][g]=b[l][g]||[];b[l][g].push(m)}else{if((j).test(k)){if(!m){c(k);return}b[l][f]=b[l][f]||[];b[l][f].push(m)}else{if(!m){c(k+"");return}b[l][e]=b[l][e]||[];b[l][e].push(m)}}},handleRouteChange:function(){if(!b){return}var p=window.location.href.split("#")[1]||"",l=p.split("?"),m=l[0].split("/"),q=l[1],k=m.length,o;if(k==1){if(!b[m[0]]||!b[m[0]][e]){d(b,m[0]);return}o=b[m[0]][e].length;for(var n=0;n<o;n++){b[m[0]][e][n](q)}}else{if(k==2){if(!b[m[0]][g]){d(b,m[0]+"/:");return}o=b[m[0]][g].length;for(var n=0;n<o;n++){b[m[0]][g][n](m[1],q)}}else{if(!b[m[0]][f]){d(b,m[0]+"/*");return}o=b[m[0]][f].length;for(var n=0;n<o;n++){b[m[0]][f][n](m,q)}}}}}}();
