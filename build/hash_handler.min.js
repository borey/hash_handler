/*
 * Hash Handler v0.1a1
 * Copyright 2011, Lim Borey
 * Licensed under the MIT.
 */
 
var HashHandler=HH={};if(typeof window.console=="undefined"){window.console={log:function(){},warn:function(){},error:function(){}}}HH.Util={getParams:function(b){b=b||window.location.hash;a=b.match(/[^&?=]*=[^&?=]*/g);r={};if(!a){return r}for(i=0;i<a.length;i++){r[a[i].match(/[^&?=]*/)[0]]=a[i].match(/=([^&?]*)/)[0].replace("=","")}return r}};HH.Route=function(){return{register:function(b){for(var c in b){HH.Event.register(c,b[c])}},activate:function(){if("onhashchange" in window){window.onhashchange=HH.Event.handleRouteChange}else{var b=window.location.hash;setInterval(function(){if(window.location.hash!=b){b=window.location.hash;HH.Event.handleRouteChange()}},100)}HH.Event.handleRouteChange()}}}();HH.Event=function(){var b={},e="option",d="all",c="none",f=/\/\:/,g=/\/\*/;return{register:function(h,k){var j=h.split("/")[0];b[j]=b[j]||{};if(f.test(h)){if(!k){console.warn('callback for "'+h+'/:" route is undefined');return}b[j][e]=b[j][e]||[];b[j][e].push(k)}else{if((g).test(h)){if(!k){console.warn('callback for "'+h+'/*" route is undefined');return}b[j][d]=b[j][d]||[];b[j][d].push(k)}else{if(!k){console.warn('callback for "'+h+'" route is undefined');return}b[j][c]=b[j][c]||[];b[j][c].push(k)}}},handleRouteChange:function(){if(!b){return}var j=location.hash.slice(1).split("?"),k=j[0].split("/"),n=j[1],h=k.length,m;if(h==1){if(!b[k[0]][c]){console.error('callback for "'+k[0]+'/:" was not set');return}m=b[k[0]][c].length;for(var l=0;l<m;l++){b[k[0]][c][l](n)}}else{if(h==2){if(!b[k[0]][e]){console.error('callback for route "'+k[0]+'/:" was not set');return}m=b[k[0]][e].length;for(var l=0;l<m;l++){b[k[0]][e][l](k[1],n)}}else{if(!b[k[0]][d]){console.error('callback for route "'+k[0]+'/*" was not set');return}m=b[k[0]][d].length;for(var l=0;l<m;l++){b[k[0]][d][l](k,n)}}}}}}();
